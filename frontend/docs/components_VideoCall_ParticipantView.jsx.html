<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>JSDoc: Source: components/VideoCall/ParticipantView.jsx</title>

        <script src="scripts/prettify/prettify.js"></script>
        <script src="scripts/prettify/lang-css.js"></script>
        <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
        <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    </head>

    <body>

        <div id="main">

            <h1 class="page-title">Source: components/VideoCall/ParticipantView.jsx</h1>


            <section>
                <article>
            <pre class="prettyprint source linenums"><code>import React, {useEffect, useMemo, useRef} from "react";
import {useParticipant} from "@videosdk.live/react-sdk";
import ReactPlayer from "react-player";

/**
 * ParticipantView component is used to render the participant's video and audio
 * @param participantId
 * @returns {JSX.Element}
 * @component
 */
function ParticipantView({participantId}) {
    const micRef = useRef(null);
    const {webcamStream, micStream, webcamOn, micOn, isLocal, displayName} =
        useParticipant(participantId);

    const videoStream = useMemo(() => {
        if (webcamOn &amp;&amp; webcamStream) {
            const mediaStream = new MediaStream();
            mediaStream.addTrack(webcamStream.track);
            return mediaStream;
        }
    }, [webcamStream, webcamOn]);

    useEffect(() => {
        if (micRef.current) {
            if (micOn &amp;&amp; micStream) {
                const mediaStream = new MediaStream();
                mediaStream.addTrack(micStream.track);

                micRef.current.srcObject = mediaStream;
                micRef.current
                    .play()
                    .catch((error) =>
                        console.error("videoElem.current.play() failed", error)
                    );
            } else {
                micRef.current.srcObject = null;
            }
        }
    }, [micStream, micOn]);

    return (
        &lt;div>
            &lt;p>
                Participant: {displayName} | Webcam: {webcamOn ? "ON" : "OFF"} | Mic:{" "}
                {micOn ? "ON" : "OFF"}
            &lt;/p>
            &lt;audio ref={micRef} autoPlay playsInline muted={isLocal}/>
            {webcamOn &amp;&amp; (
                &lt;ReactPlayer

                    playsinline // very important prop
                    pip={false}
                    light={false}
                    controls={false}
                    muted={true}
                    playing={true}
                    url={videoStream}
                    height={"300px"}
                    width={"100%"}
                    onError={(err) => {
                        console.log(err, "participant video error");
                    }}
                />
            )}
        &lt;/div>
    );
}

export default ParticipantView;</code></pre>
                </article>
            </section>


        </div>

        <nav>
            <h2><a href="index.html">Home</a></h2>
            <h3>Global</h3>
            <ul>
                <li><a href="global.html#App">App</a></li>
                <li><a href="global.html#ContactList">ContactList</a></li>
                <li><a href="global.html#Controls">Controls</a></li>
                <li><a href="global.html#Eye">Eye</a></li>
                <li><a href="global.html#FaceDetector">FaceDetector</a></li>
                <li><a href="global.html#JoinScreen">JoinScreen</a></li>
                <li><a href="global.html#MeetingView">MeetingView</a></li>
                <li><a href="global.html#ParticipantView">ParticipantView</a></li>
                <li><a href="global.html#VideoCall">VideoCall</a></li>
                <li><a href="global.html#VideoCallPopup">Index</a></li>
                <li><a href="global.html#createMeeting">createMeeting</a></li>
            </ul>
        </nav>

        <br class="clear">

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Apr 19 2023
            16:32:10 GMT+0300 (Israel Daylight Time)
        </footer>

        <script> prettyPrint(); </script>
        <script src="scripts/linenumber.js"></script>
    </body>
</html>
